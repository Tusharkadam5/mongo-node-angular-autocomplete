<mat-card >
  <mat-card-title>Product</mat-card-title>
  <mat-card-content class="full-width">

    <form [formGroup]="searchForm" >
      <mat-form-field class="full-width">
        <input type="text"
               placeholder="Search Product"
               aria-label="Number"
               matInput
               formControlName='serchInput'
               [matAutocomplete]="auto">
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
          <mat-option *ngIf="isLoading" class="is-loading"><mat-spinner diameter="50"></mat-spinner></mat-option>
          <mat-option *ngFor="let product of productOptions | async" [value]="product._id">
            {{product.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </form>

    <!-- <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">

      <ng-container *ngIf="!isLoading">
        <mat-option *ngFor="let user of filteredUsers" [value]="user">
          <span>{{ user.name }}</span>
          <small> | ID: {{user.id}}</small>
        </mat-option>
      </ng-container>
    </mat-autocomplete> -->



   <table class="full-width" mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">


      <ng-container matColumnDef="_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> No. </th>
        <td mat-cell *matCellDef="let element"> {{element._id}} </td>
      </ng-container>


      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>


      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </th>
        <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
      </ng-container>


      <ng-container matColumnDef="cost_price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cost price </th>
        <td mat-cell *matCellDef="let element"> {{element.cost_price}} </td>
      </ng-container>


        <ng-container matColumnDef="selling_price">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Selling Price </th>
          <td mat-cell *matCellDef="let element"> {{element.selling_price}} </td>
        </ng-container>

      <tr mat-header-row *matHeaderRowDef="productColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: productColumns;"></tr>
    </table>


    <form [formGroup]="ProductForm" (ngSubmit)="submitForm()" novalidate>
      <div  fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="30px">
        <mat-form-field>
          <input matInput placeholder="Name" formControlName="name" />
          <!-- error -->
          <mat-error *ngIf="ProductForm.controls['name'].hasError('required')">
            You must provide a<strong> product name</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Quantity" formControlName="quantity" />
          <!-- error -->
          <mat-error *ngIf="ProductForm.controls['quantity'].hasError('required')">
            You must provide a <strong>product quantity</strong>
          </mat-error>
        </mat-form-field>
      </div>

      <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="30px">
        <mat-form-field>
          <input matInput placeholder="Cost Price" formControlName="cost_price" />
          <!-- error -->
          <mat-error *ngIf="ProductForm.controls['cost_price'].hasError('required')">
            You must provide a<strong> product cost price</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Selling Price" formControlName="selling_price" />
          <!-- error -->
          <mat-error *ngIf="ProductForm.controls['selling_price'].hasError('required')">
            You must provide a<strong> product selling price</strong>
          </mat-error>
        </mat-form-field>
      </div>

 <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="32px">

        <button mat-raised-button type="submit" color="primary">Submit</button>
        <button mat-raised-button type="reset" >Reset</button>
      </div >
    </form>
  </mat-card-content>

</mat-card>
